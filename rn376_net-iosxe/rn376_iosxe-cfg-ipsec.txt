! ======== Router A Configuration ========

! Step 1: IKEv2 Keyring
crypto ikev2 keyring IKEV2-KEYRING
 peer RouterB
  address 192.0.2.2
  pre-shared-key MySecurePSK123

! Step 2: IKEv2 Proposal
crypto ikev2 proposal IKEV2-PROPOSAL
 encryption aes-cbc-256
 integrity sha512
 group 21

! Step 3: IKEv2 Policy
crypto ikev2 policy IKEV2-POLICY
 proposal IKEV2-PROPOSAL

! Step 4: IKEv2 Profile
crypto ikev2 profile IKEV2-PROFILE
 match address local 192.0.2.1
 match identity remote address 192.0.2.2 255.255.255.255
 authentication local pre-share
 authentication remote pre-share
 keyring local IKEV2-KEYRING

! Step 5: IPsec Transform Set
crypto ipsec transform-set IPSEC-TRANSFORM-SET esp-aes 256 esp-sha512-hmac
 mode tunnel

! Step 6: IPsec Profile
crypto ipsec profile IPSEC-PROFILE
 set transform-set IPSEC-TRANSFORM-SET
 set ikev2-profile IKEV2-PROFILE

! Step 7: GRE Tunnel Configuration
interface Tunnel0
 ip address 10.1.1.1 255.255.255.252
 tunnel source 192.0.2.1
 tunnel destination 192.0.2.2
 tunnel protection ipsec profile IPSEC-PROFILE

! ======== Router B Configuration ========

! Step 1: IKEv2 Keyring
crypto ikev2 keyring IKEV2-KEYRING
 peer RouterA
  address 192.0.2.1
  pre-shared-key MySecurePSK123

! Step 2: IKEv2 Proposal
crypto ikev2 proposal IKEV2-PROPOSAL
 encryption aes-cbc-256
 integrity sha512
 group 21

! Step 3: IKEv2 Policy
crypto ikev2 policy IKEV2-POLICY
 proposal IKEV2-PROPOSAL

! Step 4: IKEv2 Profile
crypto ikev2 profile IKEV2-PROFILE
 match address local 192.0.2.2
 match identity remote address 192.0.2.1 255.255.255.255
 authentication local pre-share
 authentication remote pre-share
 keyring local IKEV2-KEYRING

! Step 5: IPsec Transform Set
crypto ipsec transform-set IPSEC-TRANSFORM-SET esp-aes 256 esp-sha512-hmac
 mode tunnel

! Step 6: IPsec Profile
crypto ipsec profile IPSEC-PROFILE
 set transform-set IPSEC-TRANSFORM-SET
 set ikev2-profile IKEV2-PROFILE

! Step 7: GRE Tunnel Configuration
interface Tunnel0
 ip address 10.1.1.2 255.255.255.252
 tunnel source 192.0.2.2
 tunnel destination 192.0.2.1
 tunnel protection ipsec profile IPSEC-PROFILE